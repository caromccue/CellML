#!/usr/bin/env pythonw
import os
import argparse

from src.crystal_processing.process_image_folder import process_image_folder
from src.data.segment_droplets import segment_droplets_to_file

# Setup parser
ap = argparse.ArgumentParser()
ap.add_argument("directory", default=os.getcwd(), help="Path of the directory")
ap.add_argument("-e", "--extract-droplets", action='store_true', help="Segment the droplets from the passed image(s) to a directory with the same name")


args = ap.parse_args()
path = args.directory

if args.extract_droplets:
    # -e flag segments droplets to file (to build training set)
    segment_droplets_to_file(path)
else:
    # Defaults to processing the image folder
    process_image_folder(path)
